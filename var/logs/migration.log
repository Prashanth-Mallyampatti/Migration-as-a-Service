Using /etc/ansible/ansible.cfg as config file

PLAY [main] *************************************************************************************************************************************************

TASK [Detach Interface] *************************************************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh domiflist \"t1_VM1\" | grep -w \"t1VM1if1\" ; if [ $? -eq 0 ] ; then virsh detach-interface --domain \"t1_VM1\" --type direct --config ; fi\n", "delta": "0:00:00.053325", "end": "2019-11-22 06:54:29.389384", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "rc": 0, "start": "2019-11-22 06:54:29.336059", "stderr": "", "stderr_lines": [], "stdout": "macvtap0   direct     t1VM1if1   rtl8139     52:54:00:68:4a:91\nInterface detached successfully", "stdout_lines": ["macvtap0   direct     t1VM1if1   rtl8139     52:54:00:68:4a:91", "Interface detached successfully"]}

TASK [Shutdown VMs] *****************************************************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh list --state-shutoff | grep -w \"t1_VM1\" ; if [ $? -ne 0 ] ; then virsh shutdown \"t1_VM1\" ; fi\n", "delta": "0:00:00.148138", "end": "2019-11-22 06:54:29.805856", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "rc": 0, "start": "2019-11-22 06:54:29.657718", "stderr": "", "stderr_lines": [], "stdout": "Domain t1_VM1 is being shutdown", "stdout_lines": ["Domain t1_VM1 is being shutdown"]}

TASK [Remove TEMP files] ************************************************************************************************************************************
changed: [localhost] => {"changed": true, "path": "/root/.ansible/tmp/", "state": "absent"}

PLAY [worker] ***********************************************************************************************************************************************

TASK [Remove TEMP files] ************************************************************************************************************************************
changed: [99.99.99.2] => {"changed": true, "path": "/root/.ansible/tmp/", "state": "absent"}

TASK [Migrate VM images] ************************************************************************************************************************************
FAILED - RETRYING: Migrate VM images (3 retries left).
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "attempts": 2, "changed": true, "checksum": "af758c01704308a1607924de9c97a11ab32d2f96", "dest": "/var/lib/libvirt/images/t1_VM1.qcow2", "gid": 0, "group": "root", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "md5sum": "8b924b3488a3ef0865ab097e83d283bc", "mode": "0644", "owner": "root", "size": 10739318784, "src": "/root/.ansible/tmp/ansible-tmp-1574405671.45-206401471053745/source", "state": "file", "uid": 0}

TASK [Migrate VM templates] *********************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "checksum": "280a0e26a14226944246cd0177a779fd802836c4", "dest": "/etc/libvirt/qemu/t1_VM1.xml", "gid": 0, "group": "root", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "md5sum": "c63170d04c1f5f65fa5093a681fbc5f9", "mode": "0644", "owner": "root", "size": 4252, "src": "/root/.ansible/tmp/ansible-tmp-1574406281.77-240095681257858/source", "state": "file", "uid": 0}

TASK [Get list of running VMs] ******************************************************************************************************************************
ok: [99.99.99.2] => {"changed": false, "cmd": ["virsh", "list", "--name"], "delta": "0:00:00.041705", "end": "2019-11-22 07:04:42.641480", "rc": 0, "start": "2019-11-22 07:04:42.599775", "stderr": "", "stderr_lines": [], "stdout": "t1_VM4", "stdout_lines": ["t1_VM4"]}

TASK [Define VM] ********************************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "created": "t1_VM1", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "warnings": ["'xml' is given - ignoring 'name'"]}

TASK [Create VM] ********************************************************************************************************************************************
ok: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": false, "create": 0, "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}]}

TASK [Start VM] *********************************************************************************************************************************************
ok: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": false, "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}]}

TASK [Create VETH Pairs] ************************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip link show \"t1br1if1_m\" ; if [ $? -ne 0 ] ; then ip link add \"t1VM1if1_m\" type veth peer name \"t1br1if1_m\" ; fi\nip link set dev \"t1br1if1_m\" up\nip link set dev \"t1VM1if1_m\" up\n", "delta": "0:00:00.023202", "end": "2019-11-22 07:04:44.948175", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "rc": 0, "start": "2019-11-22 07:04:44.924973", "stderr": "Device \"t1br1if1_m\" does not exist.", "stderr_lines": ["Device \"t1br1if1_m\" does not exist."], "stdout": "", "stdout_lines": []}

TASK [Attach VETH Pairs] ************************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip link show \"t1br1if1_m\" ; if [ $? -eq 0 ] ; then ip link set \"t1br1if1_m\" netns \"t1ns1\" ; fi\nip netns exec \"t1ns1\" brctl show \"t1br1\" | grep -w 't1br1if1_m' ; if [ $? -ne 0 ] ; then ip netns exec \"t1ns1\" brctl addif \"t1br1\" \"t1br1if1_m\" ; fi\nvirsh domiflist \"t1_VM1\" | grep -w \"t1VM1if1_m\" ; if [ $? -ne 0 ] ; then virsh attach-interface --domain \"t1_VM1\" direct \"t1VM1if1_m\" --live --persistent --mac \"52:54:00:68:4a:91\" ; fi\n", "delta": "0:00:00.371594", "end": "2019-11-22 07:04:45.584963", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "rc": 0, "start": "2019-11-22 07:04:45.213369", "stderr": "", "stderr_lines": [], "stdout": "25: t1br1if1_m@t1VM1if1_m: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default qlen 1000\n    link/ether be:6a:42:e6:5c:be brd ff:ff:ff:ff:ff:ff\nInterface attached successfully", "stdout_lines": ["25: t1br1if1_m@t1VM1if1_m: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default qlen 1000", "    link/ether be:6a:42:e6:5c:be brd ff:ff:ff:ff:ff:ff", "Interface attached successfully"]}

TASK [Make all interfaces UP] *******************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip netns exec \"t1ns1\" ip link set dev \"t1br1if1_m\" up\nip link set dev \"t1VM1if1_m\" up\n", "delta": "0:00:00.052799", "end": "2019-11-22 07:04:45.873489", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "rc": 0, "start": "2019-11-22 07:04:45.820690", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

PLAY [main] *************************************************************************************************************************************************

TASK [pause] ************************************************************************************************************************************************
Pausing for 60 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost] => {"changed": false, "delta": 60, "echo": true, "rc": 0, "start": "2019-11-22 07:04:45.960265", "stderr": "", "stdout": "Paused for 1.0 minutes", "stop": "2019-11-22 07:05:45.960555", "user_input": ""}

TASK [Undefine Migrated VM at C1] ***************************************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM1if1_m', u'vm_mac': u'52:54:00:68:4a:91', u'name': u't1_VM1', u'vmif': u't1VM1if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh undefine \"t1_VM1\"\n", "delta": "0:00:00.028436", "end": "2019-11-22 07:05:46.189851", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM1", "vm_mac": "52:54:00:68:4a:91", "vmif": "t1VM1if1", "vmif_m": "t1VM1if1_m"}], "rc": 0, "start": "2019-11-22 07:05:46.161415", "stderr": "", "stderr_lines": [], "stdout": "Domain t1_VM1 has been undefined", "stdout_lines": ["Domain t1_VM1 has been undefined"]}

PLAY RECAP **************************************************************************************************************************************************
99.99.99.2                 : ok=10   changed=7    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
localhost                  : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Using /etc/ansible/ansible.cfg as config file

PLAY [worker] ***********************************************************************************************************************************************

TASK [Detach Interface] *************************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh domiflist \"t1_VM4\" | grep -w \"t1VM4if1\" ; if [ $? -eq 0 ] ; then virsh detach-interface --domain \"t1_VM4\" --type direct --config ; fi\n", "delta": "0:00:00.064367", "end": "2019-11-22 07:05:48.374253", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "rc": 0, "start": "2019-11-22 07:05:48.309886", "stderr": "", "stderr_lines": [], "stdout": "macvtap0   direct     t1VM4if1   rtl8139     52:54:00:a7:c6:7e\nInterface detached successfully", "stdout_lines": ["macvtap0   direct     t1VM4if1   rtl8139     52:54:00:a7:c6:7e", "Interface detached successfully"]}

TASK [Shutdown VMs] *****************************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh list --state-shutoff | grep -w \"t1_VM4\" ; if [ $? -ne 0 ] ; then virsh shutdown \"t1_VM4\" ; fi\n", "delta": "0:00:00.193926", "end": "2019-11-22 07:05:48.892140", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "rc": 0, "start": "2019-11-22 07:05:48.698214", "stderr": "", "stderr_lines": [], "stdout": "Domain t1_VM4 is being shutdown", "stdout_lines": ["Domain t1_VM4 is being shutdown"]}

TASK [Remove TEMP files] ************************************************************************************************************************************
changed: [99.99.99.2] => {"changed": true, "path": "/root/.ansible/tmp/", "state": "absent"}

TASK [Migrate VM images] ************************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "checksum": "6eb3a7049ab8e3d211cbde1634a21785d59e1710", "dest": "/var/lib/libvirt/images/t1_VM4.qcow2", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "md5sum": "ba68fbc5d5e5e2cebaa159a62a382f79", "remote_checksum": "7498c7cced2bf19fc24e9ca4e7d19f65481487c7", "remote_md5sum": null}

TASK [Migrate VM templates] *********************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "checksum": "afee72780c49aeb6633ee6257ec06acbd1b905ba", "dest": "/etc/libvirt/qemu/t1_VM4.xml", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "md5sum": "88fd946705f0535e59159433b580c837", "remote_checksum": "afee72780c49aeb6633ee6257ec06acbd1b905ba", "remote_md5sum": null}

PLAY [main] *************************************************************************************************************************************************

TASK [Get list of running VMs] ******************************************************************************************************************************
ok: [localhost] => {"changed": false, "cmd": ["virsh", "list", "--name"], "delta": "0:00:00.023875", "end": "2019-11-22 07:10:46.050823", "rc": 0, "start": "2019-11-22 07:10:46.026948", "stderr": "", "stderr_lines": [], "stdout": "t1_VM2\nt1_VM3", "stdout_lines": ["t1_VM2", "t1_VM3"]}

TASK [Define VM] ********************************************************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "created": "t1_VM4", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "warnings": ["'xml' is given - ignoring 'name'"]}

TASK [Create VM] ********************************************************************************************************************************************
ok: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": false, "create": 0, "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}]}

TASK [Start VM] *********************************************************************************************************************************************
ok: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": false, "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}]}

TASK [Create VETH Pairs] ************************************************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip link show \"t1br1if1_m\" ; if [ $? -ne 0 ] ; then ip link add \"t1VM4if1_m\" type veth peer name \"t1br1if1_m\" ; fi\nip link set dev \"t1br1if1_m\" up\nip link set dev \"t1VM4if1_m\" up\n", "delta": "0:00:00.030454", "end": "2019-11-22 07:10:48.018423", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "rc": 0, "start": "2019-11-22 07:10:47.987969", "stderr": "Device \"t1br1if1_m\" does not exist.", "stderr_lines": ["Device \"t1br1if1_m\" does not exist."], "stdout": "", "stdout_lines": []}

TASK [Attach VETH Pairs] ************************************************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip link show \"t1br1if1_m\" ; if [ $? -eq 0 ] ; then ip link set \"t1br1if1_m\" netns \"t1ns1\" ; fi\nip netns exec \"t1ns1\" brctl show \"t1br1\" | grep -w 't1br1if1_m' ; if [ $? -ne 0 ] ; then ip netns exec \"t1ns1\" brctl addif \"t1br1\" \"t1br1if1_m\" ; fi\nvirsh domiflist \"t1_VM4\" | grep -w \"t1VM4if1_m\" ; if [ $? -ne 0 ] ; then virsh attach-interface --domain \"t1_VM4\" direct \"t1VM4if1_m\" --live --persistent --mac \"52:54:00:a7:c6:7e\" ; fi\n", "delta": "0:00:00.331250", "end": "2019-11-22 07:10:48.518053", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "rc": 0, "start": "2019-11-22 07:10:48.186803", "stderr": "", "stderr_lines": [], "stdout": "35: t1br1if1_m@t1VM4if1_m: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default qlen 1000\n    link/ether 1a:f2:40:c4:19:88 brd ff:ff:ff:ff:ff:ff\nInterface attached successfully", "stdout_lines": ["35: t1br1if1_m@t1VM4if1_m: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default qlen 1000", "    link/ether 1a:f2:40:c4:19:88 brd ff:ff:ff:ff:ff:ff", "Interface attached successfully"]}

TASK [Make all interfaces UP] *******************************************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip netns exec \"t1ns1\" ip link set dev \"t1br1if1_m\" up\nip link set dev \"t1VM4if1_m\" up\n", "delta": "0:00:00.045791", "end": "2019-11-22 07:10:48.715346", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "rc": 0, "start": "2019-11-22 07:10:48.669555", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

PLAY [worker] ***********************************************************************************************************************************************

TASK [pause] ************************************************************************************************************************************************
Pausing for 60 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [99.99.99.2] => {"changed": false, "delta": 60, "echo": true, "rc": 0, "start": "2019-11-22 07:10:48.774109", "stderr": "", "stdout": "Paused for 1.0 minutes", "stop": "2019-11-22 07:11:48.774449", "user_input": ""}

TASK [Undefine Migrated VM at C2] ***************************************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't1ns1', u'bridge_name': u't1br1'}, {u'vmif_m': u't1VM4if1_m', u'vm_mac': u'52:54:00:a7:c6:7e', u'name': u't1_VM4', u'vmif': u't1VM4if1', u'brif_m': u't1br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh undefine \"t1_VM4\"\n", "delta": "0:00:00.027026", "end": "2019-11-22 07:11:49.862820", "item": [{"bridge_name": "t1br1", "ns_name": "t1ns1"}, {"brif_m": "t1br1if1_m", "name": "t1_VM4", "vm_mac": "52:54:00:a7:c6:7e", "vmif": "t1VM4if1", "vmif_m": "t1VM4if1_m"}], "rc": 0, "start": "2019-11-22 07:11:49.835794", "stderr": "", "stderr_lines": [], "stdout": "Domain t1_VM4 has been undefined", "stdout_lines": ["Domain t1_VM4 has been undefined"]}

PLAY RECAP **************************************************************************************************************************************************
99.99.99.2                 : ok=7    changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
localhost                  : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

