Using /etc/ansible/ansible.cfg as config file

PLAY [main] **********************************************************************************************************

TASK [Detach Interface] **********************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh domiflist \"t3_VM1\" | grep -w \"t3VM1if1\" ; if [ $? -eq 0 ] ; then virsh detach-interface --domain \"t3_VM1\" --type direct --config ; fi\n", "delta": "0:00:00.051654", "end": "2019-11-24 18:33:59.773521", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "rc": 0, "start": "2019-11-24 18:33:59.721867", "stderr": "", "stderr_lines": [], "stdout": "macvtap3   direct     t3VM1if1   rtl8139     52:54:00:97:2a:a0\nInterface detached successfully", "stdout_lines": ["macvtap3   direct     t3VM1if1   rtl8139     52:54:00:97:2a:a0", "Interface detached successfully"]}

TASK [Shutdown VMs] **************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh list --state-shutoff | grep -w \"t3_VM1\" ; if [ $? -ne 0 ] ; then virsh shutdown \"t3_VM1\" ; fi\n", "delta": "0:00:00.195626", "end": "2019-11-24 18:34:00.223583", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "rc": 0, "start": "2019-11-24 18:34:00.027957", "stderr": "", "stderr_lines": [], "stdout": "Domain t3_VM1 is being shutdown", "stdout_lines": ["Domain t3_VM1 is being shutdown"]}

TASK [Remove TEMP files] *********************************************************************************************
changed: [localhost] => {"changed": true, "path": "/root/.ansible/tmp/", "state": "absent"}

PLAY [worker] ********************************************************************************************************

TASK [Remove TEMP files] *********************************************************************************************
changed: [99.99.99.2] => {"changed": true, "path": "/root/.ansible/tmp/", "state": "absent"}

TASK [Migrate VM images] *********************************************************************************************
FAILED - RETRYING: Migrate VM images (3 retries left).
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "attempts": 2, "changed": true, "checksum": "6f8f963ab58fb2593d74d0f8aba7574d38660c4b", "dest": "/var/lib/libvirt/images/t3_VM1.qcow2", "gid": 0, "group": "root", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "md5sum": "44af8661568cec6e02e2a9bee5737eeb", "mode": "0644", "owner": "root", "size": 10739318784, "src": "/root/.ansible/tmp/ansible-tmp-1574620441.9-87403006100751/source", "state": "file", "uid": 0}

TASK [Migrate VM templates] ******************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "checksum": "87b7998101d35e763376c057f8ffeb42ab1cad3f", "dest": "/etc/libvirt/qemu/t3_VM1.xml", "gid": 0, "group": "root", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "md5sum": "d35f734b66d413369dc6cd216bf10e80", "mode": "0644", "owner": "root", "size": 4252, "src": "/root/.ansible/tmp/ansible-tmp-1574620988.68-116877879552969/source", "state": "file", "uid": 0}

TASK [Get list of running VMs] ***************************************************************************************
ok: [99.99.99.2] => {"changed": false, "cmd": ["virsh", "list", "--name"], "delta": "0:00:00.026942", "end": "2019-11-24 18:43:09.604812", "rc": 0, "start": "2019-11-24 18:43:09.577870", "stderr": "", "stderr_lines": [], "stdout": "t2_VM4\nt3_VM4", "stdout_lines": ["t2_VM4", "t3_VM4"]}

TASK [Define VM] *****************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "created": "t3_VM1", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "warnings": ["'xml' is given - ignoring 'name'"]}

TASK [Create VM] *****************************************************************************************************
ok: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": false, "create": 0, "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}]}

TASK [Start VM] ******************************************************************************************************
ok: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": false, "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}]}

TASK [Create VETH Pairs] *********************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip link show \"t3br1if1_m\" ; if [ $? -ne 0 ] ; then ip link add \"t3VM1if1_m\" type veth peer name \"t3br1if1_m\" ; fi\nip link set dev \"t3br1if1_m\" up\nip link set dev \"t3VM1if1_m\" up\n", "delta": "0:00:00.028077", "end": "2019-11-24 18:43:11.904583", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "rc": 0, "start": "2019-11-24 18:43:11.876506", "stderr": "Device \"t3br1if1_m\" does not exist.", "stderr_lines": ["Device \"t3br1if1_m\" does not exist."], "stdout": "", "stdout_lines": []}

TASK [Attach VETH Pairs] *********************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip link show \"t3br1if1_m\" ; if [ $? -eq 0 ] ; then ip link set \"t3br1if1_m\" netns \"t3ns1\" ; fi\nip netns exec \"t3ns1\" brctl show \"t3br1\" | grep -w 't3br1if1_m' ; if [ $? -ne 0 ] ; then ip netns exec \"t3ns1\" brctl addif \"t3br1\" \"t3br1if1_m\" ; fi\nvirsh domiflist \"t3_VM1\" | grep -w \"t3VM1if1_m\" ; if [ $? -ne 0 ] ; then virsh attach-interface --domain \"t3_VM1\" direct \"t3VM1if1_m\" --live --persistent --mac \"52:54:00:97:2a:a0\" ; fi\n", "delta": "0:00:00.340372", "end": "2019-11-24 18:43:12.523368", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "rc": 0, "start": "2019-11-24 18:43:12.182996", "stderr": "", "stderr_lines": [], "stdout": "26: t3br1if1_m@t3VM1if1_m: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default qlen 1000\n    link/ether ea:a2:51:32:82:a4 brd ff:ff:ff:ff:ff:ff\nInterface attached successfully", "stdout_lines": ["26: t3br1if1_m@t3VM1if1_m: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default qlen 1000", "    link/ether ea:a2:51:32:82:a4 brd ff:ff:ff:ff:ff:ff", "Interface attached successfully"]}

TASK [Make all interfaces UP] ****************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip netns exec \"t3ns1\" ip link set dev \"t3br1if1_m\" up\nip link set dev \"t3VM1if1_m\" up\n", "delta": "0:00:00.040339", "end": "2019-11-24 18:43:12.842611", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "rc": 0, "start": "2019-11-24 18:43:12.802272", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

PLAY [main] **********************************************************************************************************

TASK [pause] *********************************************************************************************************
Pausing for 60 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [localhost] => {"changed": false, "delta": 60, "echo": true, "rc": 0, "start": "2019-11-24 18:43:12.930164", "stderr": "", "stdout": "Paused for 1.0 minutes", "stop": "2019-11-24 18:44:12.930628", "user_input": ""}

TASK [Undefine Migrated VM at C1] ************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM1if1_m', u'vm_mac': u'52:54:00:97:2a:a0', u'name': u't3_VM1', u'vmif': u't3VM1if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh undefine \"t3_VM1\"\n", "delta": "0:00:00.037404", "end": "2019-11-24 18:44:13.204612", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM1", "vm_mac": "52:54:00:97:2a:a0", "vmif": "t3VM1if1", "vmif_m": "t3VM1if1_m"}], "rc": 0, "start": "2019-11-24 18:44:13.167208", "stderr": "", "stderr_lines": [], "stdout": "Domain t3_VM1 has been undefined", "stdout_lines": ["Domain t3_VM1 has been undefined"]}

PLAY RECAP ***********************************************************************************************************
99.99.99.2                 : ok=10   changed=7    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
localhost                  : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Using /etc/ansible/ansible.cfg as config file

PLAY [worker] ********************************************************************************************************

TASK [Detach Interface] **********************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh domiflist \"t3_VM4\" | grep -w \"t3VM4if1\" ; if [ $? -eq 0 ] ; then virsh detach-interface --domain \"t3_VM4\" --type direct --config ; fi\n", "delta": "0:00:00.046065", "end": "2019-11-24 18:44:15.465564", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "rc": 0, "start": "2019-11-24 18:44:15.419499", "stderr": "", "stderr_lines": [], "stdout": "macvtap1   direct     t3VM4if1   rtl8139     52:54:00:8e:d2:a2\nInterface detached successfully", "stdout_lines": ["macvtap1   direct     t3VM4if1   rtl8139     52:54:00:8e:d2:a2", "Interface detached successfully"]}

TASK [Shutdown VMs] **************************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh list --state-shutoff | grep -w \"t3_VM4\" ; if [ $? -ne 0 ] ; then virsh shutdown \"t3_VM4\" ; fi\n", "delta": "0:00:00.156362", "end": "2019-11-24 18:44:15.975914", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "rc": 0, "start": "2019-11-24 18:44:15.819552", "stderr": "", "stderr_lines": [], "stdout": "Domain t3_VM4 is being shutdown", "stdout_lines": ["Domain t3_VM4 is being shutdown"]}

TASK [Remove TEMP files] *********************************************************************************************
changed: [99.99.99.2] => {"changed": true, "path": "/root/.ansible/tmp/", "state": "absent"}

TASK [Migrate VM images] *********************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "checksum": "cbe988cf37c0094674eacacffd669c35aecc0aac", "dest": "/var/lib/libvirt/images/t3_VM4.qcow2", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "md5sum": "cb94d8124ad39d73926095ca40d05f31", "remote_checksum": "586b0f075b86ca7e510f1a18df7ef37d17976603", "remote_md5sum": null}

TASK [Migrate VM templates] ******************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "checksum": "ad91cb31bf53ac0ac56e89d55b2306f83acc6166", "dest": "/etc/libvirt/qemu/t3_VM4.xml", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "md5sum": "f287f89cb52a81d5c260fd12138dd8cd", "remote_checksum": "ad91cb31bf53ac0ac56e89d55b2306f83acc6166", "remote_md5sum": null}

PLAY [main] **********************************************************************************************************

TASK [Get list of running VMs] ***************************************************************************************
ok: [localhost] => {"changed": false, "cmd": ["virsh", "list", "--name"], "delta": "0:00:00.021893", "end": "2019-11-24 18:48:52.755051", "rc": 0, "start": "2019-11-24 18:48:52.733158", "stderr": "", "stderr_lines": [], "stdout": "t2_VM1\nt2_VM2\nt2_VM3\nt3_VM2\nt3_VM3", "stdout_lines": ["t2_VM1", "t2_VM2", "t2_VM3", "t3_VM2", "t3_VM3"]}

TASK [Define VM] *****************************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "created": "t3_VM4", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "warnings": ["'xml' is given - ignoring 'name'"]}

TASK [Create VM] *****************************************************************************************************
ok: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": false, "create": 0, "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}]}

TASK [Start VM] ******************************************************************************************************
ok: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": false, "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}]}

TASK [Create VETH Pairs] *********************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip link show \"t3br1if1_m\" ; if [ $? -ne 0 ] ; then ip link add \"t3VM4if1_m\" type veth peer name \"t3br1if1_m\" ; fi\nip link set dev \"t3br1if1_m\" up\nip link set dev \"t3VM4if1_m\" up\n", "delta": "0:00:00.035809", "end": "2019-11-24 18:48:54.680826", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "rc": 0, "start": "2019-11-24 18:48:54.645017", "stderr": "Device \"t3br1if1_m\" does not exist.", "stderr_lines": ["Device \"t3br1if1_m\" does not exist."], "stdout": "", "stdout_lines": []}

TASK [Attach VETH Pairs] *********************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip link show \"t3br1if1_m\" ; if [ $? -eq 0 ] ; then ip link set \"t3br1if1_m\" netns \"t3ns1\" ; fi\nip netns exec \"t3ns1\" brctl show \"t3br1\" | grep -w 't3br1if1_m' ; if [ $? -ne 0 ] ; then ip netns exec \"t3ns1\" brctl addif \"t3br1\" \"t3br1if1_m\" ; fi\nvirsh domiflist \"t3_VM4\" | grep -w \"t3VM4if1_m\" ; if [ $? -ne 0 ] ; then virsh attach-interface --domain \"t3_VM4\" direct \"t3VM4if1_m\" --live --persistent --mac \"52:54:00:8e:d2:a2\" ; fi\n", "delta": "0:00:00.347657", "end": "2019-11-24 18:48:55.234694", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "rc": 0, "start": "2019-11-24 18:48:54.887037", "stderr": "", "stderr_lines": [], "stdout": "42: t3br1if1_m@t3VM4if1_m: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default qlen 1000\n    link/ether 1a:c6:d1:b8:9d:e7 brd ff:ff:ff:ff:ff:ff\nInterface attached successfully", "stdout_lines": ["42: t3br1if1_m@t3VM4if1_m: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DEFAULT group default qlen 1000", "    link/ether 1a:c6:d1:b8:9d:e7 brd ff:ff:ff:ff:ff:ff", "Interface attached successfully"]}

TASK [Make all interfaces UP] ****************************************************************************************
changed: [localhost] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "ip netns exec \"t3ns1\" ip link set dev \"t3br1if1_m\" up\nip link set dev \"t3VM4if1_m\" up\n", "delta": "0:00:00.041251", "end": "2019-11-24 18:48:55.450253", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "rc": 0, "start": "2019-11-24 18:48:55.409002", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

PLAY [worker] ********************************************************************************************************

TASK [pause] *********************************************************************************************************
Pausing for 60 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [99.99.99.2] => {"changed": false, "delta": 60, "echo": true, "rc": 0, "start": "2019-11-24 18:48:55.521725", "stderr": "", "stdout": "Paused for 1.0 minutes", "stop": "2019-11-24 18:49:55.522166", "user_input": ""}

TASK [Undefine Migrated VM at C2] ************************************************************************************
changed: [99.99.99.2] => (item=[{u'ns_name': u't3ns1', u'bridge_name': u't3br1'}, {u'vmif_m': u't3VM4if1_m', u'vm_mac': u'52:54:00:8e:d2:a2', u'name': u't3_VM4', u'vmif': u't3VM4if1', u'brif_m': u't3br1if1_m'}]) => {"ansible_loop_var": "item", "changed": true, "cmd": "virsh undefine \"t3_VM4\"\n", "delta": "0:00:00.018786", "end": "2019-11-24 18:49:56.503927", "item": [{"bridge_name": "t3br1", "ns_name": "t3ns1"}, {"brif_m": "t3br1if1_m", "name": "t3_VM4", "vm_mac": "52:54:00:8e:d2:a2", "vmif": "t3VM4if1", "vmif_m": "t3VM4if1_m"}], "rc": 0, "start": "2019-11-24 18:49:56.485141", "stderr": "", "stderr_lines": [], "stdout": "Domain t3_VM4 has been undefined", "stdout_lines": ["Domain t3_VM4 has been undefined"]}

PLAY RECAP ***********************************************************************************************************
99.99.99.2                 : ok=7    changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
localhost                  : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

